apiVersion: skaffold/v4beta12
kind: Config
metadata:
  name: vparking-scaffold

build:
  artifacts:
    - image: vparking-users
      context: vparking/src
      docker:
        dockerfile: Dockerfile
deploy:
  helm:
    releases:
      - name: ingress-nginx
        namespace: ingress
        createNamespace: true
        chartPath: api-gateway/ingress-nginx
        skipBuildDependencies: true
        valuesFiles:
          - api-gateway/ingress-nginx/values.yaml
        version: 4.12.1
      - name: keycloak
        namespace: keycloak
        createNamespace: true
        chartPath: api-gateway/keycloak
        skipBuildDependencies: true
        valuesFiles:
          - api-gateway/keycloak/values.yaml
          - api-gateway/keycloak-values.yaml
        version: 24.4.13
        
      - name: vparking-settings
        namespace: vparking
        createNamespace: true
        chartPath: vparking/vparking-users
        skipBuildDependencies: true
        valuesFiles:
          - vparking/vparking-users/values.yaml
        version: 0.1.0
portForward:
  - resourceType: Service
    resourceName: vparking-settings
    namespace: vparking
    port: 22
    localPort: 5022   